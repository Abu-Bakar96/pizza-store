{"ast":null,"code":"import _slicedToArray from\"/home/admin1/carier week/react-pizza-v2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useDispatch}from'react-redux';import{setSort}from'../redux/filter/slice';import{SortPropertyEnum}from'../redux/filter/types';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var list=[{name:'популярности (DESC)',sortProperty:SortPropertyEnum.RATING_DESC},{name:'популярности (ASC)',sortProperty:SortPropertyEnum.RATING_ASC},{name:'цене (DESC)',sortProperty:SortPropertyEnum.PRICE_DESC},{name:'цене (ASC)',sortProperty:SortPropertyEnum.PRICE_ASC},{name:'алфавиту (DESC)',sortProperty:SortPropertyEnum.TITLE_DESC},{name:'алфавиту (ASC)',sortProperty:SortPropertyEnum.TITLE_ASC}];var Sort=/*#__PURE__*/React.memo(function(_ref){var value=_ref.value;var dispatch=useDispatch();var sortRef=React.useRef(null);var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var onClickListItem=function onClickListItem(obj){dispatch(setSort(obj));setOpen(false);};React.useEffect(function(){var handleClickOutside=function handleClickOutside(event){var _event=event;if(sortRef.current&&!_event.path.includes(sortRef.current)){setOpen(false);}};document.body.addEventListener('click',handleClickOutside);return function(){return document.body.removeEventListener('click',handleClickOutside);};},[]);return/*#__PURE__*/_jsxs(\"div\",{ref:sortRef,className:\"sort\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sort__label\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"10\",height:\"6\",viewBox:\"0 0 10 6\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z\",fill:\"#2C2C2C\"})}),/*#__PURE__*/_jsx(\"b\",{children:\"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u043F\\u043E:\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setOpen(!open);},children:value.name})]}),open&&/*#__PURE__*/_jsx(\"div\",{className:\"sort__popup\",children:/*#__PURE__*/_jsx(\"ul\",{children:list.map(function(obj,i){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return onClickListItem(obj);},className:value.sortProperty===obj.sortProperty?'active':'',children:obj.name},i);})})})]});});export default Sort;","map":{"version":3,"names":["React","useDispatch","setSort","SortPropertyEnum","list","name","sortProperty","RATING_DESC","RATING_ASC","PRICE_DESC","PRICE_ASC","TITLE_DESC","TITLE_ASC","Sort","memo","value","dispatch","sortRef","useRef","useState","open","setOpen","onClickListItem","obj","useEffect","handleClickOutside","event","_event","current","path","includes","document","body","addEventListener","removeEventListener","map","i"],"sources":["/home/admin1/carier week/react-pizza-v2/src/components/Sort.tsx"],"sourcesContent":["import React from 'react'\nimport { useDispatch } from 'react-redux';\nimport { setSort } from '../redux/filter/slice';\nimport { Sort as SortType, SortPropertyEnum } from '../redux/filter/types';\n\ntype SortItem = {\n    name: string;\n    sortProperty: SortPropertyEnum;\n}\ntype PopupClick = MouseEvent & {\n    path: Node[]\n}\n\ntype SortPopupProps = {\n    value: SortType\n}\n\nexport const list: SortItem[] = [\n    { name: 'популярности (DESC)', sortProperty: SortPropertyEnum.RATING_DESC },\n    { name: 'популярности (ASC)', sortProperty: SortPropertyEnum.RATING_ASC },\n    { name: 'цене (DESC)', sortProperty: SortPropertyEnum.PRICE_DESC },\n    { name: 'цене (ASC)', sortProperty: SortPropertyEnum.PRICE_ASC },\n    { name: 'алфавиту (DESC)', sortProperty: SortPropertyEnum.TITLE_DESC },\n    { name: 'алфавиту (ASC)', sortProperty: SortPropertyEnum.TITLE_ASC }\n]\n\n\n\n\nconst Sort: React.FC<SortPopupProps> = React.memo(({ value }) => {\n    const dispatch = useDispatch();\n    const sortRef = React.useRef<HTMLDivElement>(null)\n\n    const [open, setOpen] = React.useState(false)\n\n    const onClickListItem = (obj: SortItem) => {\n        dispatch(setSort(obj))\n        setOpen(false)\n    }\n\n    React.useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            const _event = event as PopupClick\n            if (sortRef.current && !_event.path.includes(sortRef.current)) {\n                setOpen(false)\n            }\n        }\n\n        document.body.addEventListener('click', handleClickOutside)\n\n        return () => document.body.removeEventListener('click', handleClickOutside)\n    }, [])\n\n    return (\n        <div ref={sortRef} className=\"sort\">\n            <div className=\"sort__label\">\n                <svg\n                    width=\"10\"\n                    height=\"6\"\n                    viewBox=\"0 0 10 6\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                    <path\n                        d=\"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z\"\n                        fill=\"#2C2C2C\"\n                    />\n                </svg>\n                <b>Сортировка по:</b>\n                <span onClick={() => setOpen(!open)}>{value.name}</span>\n            </div>\n            {open && (\n                <div className=\"sort__popup\">\n                    <ul>\n                        {\n                            list.map((obj, i) => (\n                                <li\n                                    key={i}\n                                    onClick={() => onClickListItem(obj)}\n                                    className={value.sortProperty === obj.sortProperty ? 'active' : ''}>\n                                    {obj.name}\n                                </li>\n                            ))\n                        }\n                    </ul>\n                </div>\n            )}\n        </div>\n    )\n})\n\nexport default Sort"],"mappings":"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"},"metadata":{},"sourceType":"module"}